<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"/>
<script src="{{ site.js.leaflet.cdn }}"></script>
<script src="{{ site.js.leaflet-iiif.cdn }}"></script>
<div id="iiif-viewer"></div>

{%- capture image_uri -%}
  {{ site.baseurl }}/iiif/images/{{ page.collection }}/{{ page.pid }}/info.json
{%- endcapture -%}

<script type="text/javascript">window.image_uri = "{{ image_uri }}";</script>
<script>
  function loadIIIFViewer(image_uri) {
    if ( $( "#iiif-viewer" ).length ) {
      var iiif_viewer = L.map('iiif-viewer', {
        center: [0, 0],
        crs: L.CRS.Simple,
        zoomDelta: 0.5,
        zoomSnap: 0,
        zoom: 0
      });
      L.tileLayer.iiif(image_uri).addTo(iiif_viewer);
    }
  }
  if (typeof(image_uri) != "undefined"){
    loadIIIFViewer(image_uri);
    console.log(image_uri);
  }
</script>
